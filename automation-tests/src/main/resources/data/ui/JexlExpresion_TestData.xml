<?xml version="1.0" encoding="UTF-8"?>

<jexl-expression-do>
    <aliases>
        <test-name>Validate that Jexl Expressions being evaluated properly</test-name>
        <var1>${str1}</var1>
        <var2>${str2}</var2>
        <var3>${str1 + " " + str2}</var3>
        <var4>${str2 + " " + str1}</var4>
        <!-- Remove is only necessary if running the same test multiple times in the same thread -->
        <var5>${lookup.remove("runtime001").append("runtime001", "12345").append("runtime001", "xyz").get("runtime001")}</var5>
        <var6>12345xyz</var6>
        <var7>${lookup.get("beforeLoadResource1") + lookup.get("beforeLoadResource2")}</var7>
        <var8>${lookup.get("beforeLoadResource1")}</var8>
        <var9>${lookup.get("beforeLoadResource2")}</var9>
        <var10>${lookup.get("int100") + lookup.get("int200")}</var10>
        <var11>300</var11>
        <RandomDateGenerator>$[RANDOM_DATE('yyyy-MM-dd','365|720')]</RandomDateGenerator>
        <RandomRealUSAddressGenerator>$[RANDOM_US_ADDRESS('{#} {C} {S} {Z} {U} {P}','')]</RandomRealUSAddressGenerator>
        <orgPass>$[ALPHANUMERIC('{a}{b}{c}{d}{e}', 'null')]</orgPass>
        <encPass>${crypto.encrypt(orgPass)}</encPass>
        <decPass>${crypto.decrypt(encPass)}</decPass>

        <random_date_pattern>MM/dd/yyyy</random_date_pattern>
        <random_date_range_min>90</random_date_range_min>
        <random_date_range_max>365</random_date_range_max>
        <calcCurrentSystemDate>${lookup.getOrDefault("CURRENT_SYSTEM_DATE", today)}</calcCurrentSystemDate>
        <currentSystemDate>${dateActions.parseDateStrictly(calcCurrentSystemDate, random_date_pattern)}</currentSystemDate>
        <calcDate1>${dateActions.format(dateUtils.addDays(currentSystemDate, 1), random_date_pattern)}</calcDate1>
        <calcDate2>${dateActions.format(dateUtils.addMonths(currentSystemDate, 1), random_date_pattern)}</calcDate2>
        <calcDate3>${dateActions.format(dateUtils.addYears(currentSystemDate, 1), random_date_pattern)}</calcDate3>
    </aliases>
    <someField initial="${var4} ${RandomDateGenerator} ${RandomRealUSAddressGenerator}" expected="${var1} ${var2}">${var3}</someField>
    <anotherField initial="${encPass}" expected="${decPass}">${orgPass}</anotherField>
    <extraField1 initial="${var5}" expected="${var6}">${var5}</extraField1>
    <extraField2 initial="${var7}" expected="${var7}">${var8}${var9}</extraField2>
    <extraField3 initial="${calcDate1} ${calcDate2}" expected="${calcDate3}">${calcDate3}</extraField3>
    <extraField4 initial="${calcDate1} ${calcDate2}" expected="${var11}">${var10}</extraField4>
    <currentSystemDate>${calcCurrentSystemDate}</currentSystemDate>
</jexl-expression-do>
